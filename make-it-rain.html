<html>
<head>
<title>Make It Rain</title>
        <style>
body {
    font-family: "Comic Sans MS", cursive, sans-serif
}
h1 {
    font-size: 16pt;
    color: red;
}
h2 {
    font-size: 13pt;
    color: cyan;
}
body {
    background:url('rain_bg.gif') repeat;
    height: 500px;
}
        </style>
<script>
var contractAddr = key.addressOf("a4724de47827539e91a5381f54cd26a9f259ea59");
raindance = function()
{
    var amount = Number(document.getElementById("amount").value);
    if ((amount<=0)) {
        window.alert("Amount should be positive!")
        return;
    };

    eth.transact(key.secret(eth.keys()[0]), u256.ether(amount), contractAddr, bytes.fromString("",0), u256.value(10000), eth.gasPrice());
}

claim = function()
{
    var myaddrs = eth.keys();
    for (var i = 0; i < myaddrs.length; i++) {
        eth.transact(key.secret(myaddrs[i]), u256.ether(0), contractAddr, bytes.fromString("",0), u256.value(10000), eth.gasPrice());
    };
}

check = function()
{
    var myaddrs = eth.keys();
    var myaddr = 0;
    bal = 0;
    for (var i = 0; i < myaddrs.length; i++) {
        myaddr = u256.fromAddress(key.address(myaddrs[i]));
        bal = bal+u256.toValue(eth.storageAt(contractAddr,myaddr));
    };
    var total = bal/1000000000000000000;
    document.getElementById('total').innerHTML = "<h1><font style=' color: red;'>" + total.toFixed(2) + " E</font></h1>";
}

</script>
</head>
<body>
    <h1>Make It Rain!</h1>
    <h2>Start A Rain</h2>
<table>
<tr><td><label for="name">How much Ether do you want to tip: </label></td><td><input id="amount" type="text" value=""/><button onClick="raindance()">RAINZ!</button></td></tr>
</table>
<hr />
<b style="color: gold;">Your Received Tips:</b><div id="total"> </div>
<button onClick="check()">Check</button><button onClick="claim()">Claim</button>
</body>
</html>
